{"version":3,"file":"bundle.js","sources":["js/links-request.js","js/materialize-inits.js","js/service-worker.js","js/sharing.js"],"sourcesContent":["/*\r\n * This file makes a request to the links so they can be displayed on the home page.\r\n */\r\n\r\nfunction request() {\r\n  var req = new XMLHttpRequest();\r\n  req.open('GET', '/page/links-embed', true);\r\n  req.onreadystatechange = function (aEvt) {\r\n    if (req.readyState == 4 && req.status == 200) {\r\n      display.innerHTML = req.responseText;\r\n    }\r\n  };\r\n  req.send(null);\r\n}\r\nwindow.onload = request()","/*\r\n * This file initializes the main Materialize components, so they can work properly.\r\n */\r\n\r\n// Initialize the parallax\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var parallax_elem = document.querySelectorAll('.parallax');\r\n  var instances = M.Parallax.init(parallax_elem);\r\n});\r\n\r\n// Initialize the modal window\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var modal_elem = document.querySelectorAll('.modal');\r\n  var instances = M.Modal.init(modal_elem);\r\n});\r\n\r\n// Initialize the home page carousel, to display multiple pictures\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var elems = document.querySelectorAll('.carousel');\r\n  var instances = M.Carousel.init(elems, {\r\n    fullWidth: true,\r\n    indicators: true\r\n  });\r\n});\r\n\r\n// Initialize the share button, located at the bottom-right of the website\r\n// Disabled : other share options took place\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//   var elems = document.querySelectorAll('.fixed-action-btn');\r\n//   var instances = M.FloatingActionButton.init(elems);\r\n// });\r\n\r\n// Initialize the collapsible part, to display one paragraph at a time\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var elems = document.querySelectorAll('.collapsible');\r\n  var instances = M.Collapsible.init(elems);\r\n});\r\n\r\n// Initialize the sidenav, displayed when navigating on small devices\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var elems = document.querySelectorAll('.sidenav');\r\n  var instances = M.Sidenav.init(elems);\r\n});\r\n\r\n// Initialize the select field in forms\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  var elems = document.querySelectorAll('select');\r\n  var instances = M.FormSelect.init(elems);\r\n});\r\n\r\n","/*\r\n * This file is the service worker : it makes an offline copy of pages.\r\n */\r\n\r\nif (navigator.serviceWorker.controller) {\r\n  console.log('[PWA Builder] active service worker found, no need to register')\r\n} else {\r\n  //Register the ServiceWorker\r\n  navigator.serviceWorker.register('/pwabuilder-sw.js', {\r\n    scope: './'\r\n  }).then(function(reg) {\r\n    console.log('Service worker has been registered for scope:'+ reg.scope);\r\n  });\r\n}","/*\r\n * This file contains all the sharing options.\r\n */\r\n\r\n// The link copying sharing option\r\nfunction copyTextToClipboard(text) {\r\n  var textArea = document.createElement(\"textarea\");\r\n\r\n  textArea.style.position = 'fixed';\r\n  textArea.style.top = 0;\r\n  textArea.style.left = 0;\r\n\r\n  textArea.style.width = '2em';\r\n  textArea.style.height = '2em';\r\n  textArea.style.padding = 0;\r\n\r\n  textArea.style.border = 'none';\r\n  textArea.style.outline = 'none';\r\n  textArea.style.boxShadow = 'none';\r\n\r\n  textArea.style.background = 'transparent';\r\n  textArea.value = text;\r\n\r\n  document.body.appendChild(textArea);\r\n\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Copying text command was ' + msg);\r\n    M.toast({html: 'Copié dans le presse-papier !'})\r\n\r\n    $('.fixed-action-btn').closeFAB();\r\n    Materialize.toast('Lien copiÃ© dans le presse-papier !', 4000, 'rounded');\r\n  }\r\n  catch (err) {\r\n    console.log('Oops, unable to copy');\r\n  }\r\n  document.body.removeChild(textArea);\r\n}\r\nfunction CopyLink() {\r\n  copyTextToClipboard(location.href);\r\n}\r\n\r\n// Using the Web Share API to share page on mobile devices\r\n(() => {\r\n    const webShareTestEl = document.querySelector('.web-share');\r\n\r\n    // CHECK IF SHARE IS AVAILABLE\r\n    if (!navigator.share) {\r\n      document.addEventListener('DOMContentLoaded', function() {\r\n        var elems = document.querySelectorAll('.fixed-action-btn');\r\n        var instances = M.FloatingActionButton.init(elems);\r\n      });\r\n      return;\r\n    }\r\n\r\n    let resetTimeout;\r\n\r\n    // METHODS\r\n    const resetButton = () => {\r\n        clearTimeout(resetTimeout);\r\n        resetTimeout = setTimeout(() => {\r\n            webShareTestEl.children[0].innerText = 'share';\r\n        }, 1000);\r\n    };\r\n\r\n    const getOpenGraphData = function (property) {\r\n        return document.querySelector(`meta[property=\"${property}\"]`).getAttribute('content')\r\n    };\r\n\r\n    const sharePage = () => {\r\n        navigator.share({\r\n            title: getOpenGraphData('og:title'),\r\n            text: getOpenGraphData('og:description'),\r\n            url: getOpenGraphData('og:url')\r\n        }).then(() => {\r\n            webShareTestEl.children[0].innerText = 'done';\r\n            resetButton();\r\n        })\r\n            .catch(error => {\r\n                console.log('Error sharing:', error);\r\n\r\n                webShareTestEl.children[0].innerText = 'error';\r\n                resetButton();\r\n            });\r\n    };\r\n\r\n    // EVENTS\r\n    webShareTestEl.addEventListener('click', sharePage);\r\n})();\r\n"],"names":["req","window","onload","XMLHttpRequest","open","onreadystatechange","aEvt","readyState","status","display","innerHTML","responseText","send","document","addEventListener","parallax_elem","querySelectorAll","M","Parallax","init","modal_elem","Modal","elems","Carousel","fullWidth","indicators","Collapsible","Sidenav","FormSelect","navigator","serviceWorker","controller","console","log","register","scope","then","reg","webShareTestEl","querySelector","share","FloatingActionButton","resetTimeout","resetButton","clearTimeout","setTimeout","children","innerText","getOpenGraphData","property","getAttribute","title","text","url","catch","error"],"mappings":"yBAIA,IACMA,EASNC,OAAOC,SATDF,EAAM,IAAIG,gBACVC,KAAK,MAAO,qBAAqB,GACrCJ,EAAIK,mBAAqB,SAAUC,GACX,GAAlBN,EAAIO,YAAiC,KAAdP,EAAIQ,SAC7BC,QAAQC,UAAYV,EAAIW,oBAG5BX,EAAIY,KAAK,OCPXC,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIC,EAAgBF,SAASG,iBAAiB,aAC9BC,EAAEC,SAASC,KAAKJ,KAIlCF,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIM,EAAaP,SAASG,iBAAiB,UAC3BC,EAAEI,MAAMF,KAAKC,KAI/BP,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIQ,EAAQT,SAASG,iBAAiB,aACtBC,EAAEM,SAASJ,KAAKG,EAAO,CACrCE,WAAW,EACXC,YAAY,MAYhBZ,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIQ,EAAQT,SAASG,iBAAiB,gBACtBC,EAAES,YAAYP,KAAKG,KAIrCT,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIQ,EAAQT,SAASG,iBAAiB,YACtBC,EAAEU,QAAQR,KAAKG,KAIjCT,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIQ,EAAQT,SAASG,iBAAiB,UACtBC,EAAEW,WAAWT,KAAKG,KC3ChCO,UAAUC,cAAcC,WAC1BC,QAAQC,IAAI,kEAGZJ,UAAUC,cAAcI,SAAS,oBAAqB,CACpDC,MAAO,OACNC,KAAK,SAASC,GACfL,QAAQC,IAAI,gDAAiDI,EAAIF,SCmCrE,MACI,MAAMG,EAAiBzB,SAAS0B,cAAc,cAG9C,IAAKV,UAAUW,MAKb,YAJA3B,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIQ,EAAQT,SAASG,iBAAiB,qBACtBC,EAAEwB,qBAAqBtB,KAAKG,KAKhD,IAAIoB,EAGJ,MAAMC,EAAc,KAChBC,aAAaF,GACbA,EAAeG,WAAW,KACtBP,EAAeQ,SAAS,GAAGC,UAAY,SACxC,MAGDC,EAAmB,SAAUC,GAC/B,OAAOpC,SAAS0B,gCAAgCU,OAAcC,aAAa,YAqB/EZ,EAAexB,iBAAiB,QAlBd,KACde,UAAUW,MAAM,CACZW,MAAOH,EAAiB,YACxBI,KAAMJ,EAAiB,kBACvBK,IAAKL,EAAiB,YACvBZ,KAAK,KACJE,EAAeQ,SAAS,GAAGC,UAAY,OACvCJ,MAECW,MAAMC,IACHvB,QAAQC,IAAI,iBAAkBsB,GAE9BjB,EAAeQ,SAAS,GAAGC,UAAY,QACvCJ,SAvChB"}